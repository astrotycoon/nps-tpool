<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>NPS Pthread Pool: thr_pool.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">NPS Pthread Pool
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="dir_775bf50c651aff6b7c708983c7f2ee12.html">include</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">thr_pool.h File Reference</div>  </div>
</div>
<div class="contents">

<p>The NPS Pthread Pool module interface.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;pthread.h&gt;</code><br/>
<code>#include &lt;limits.h&gt;</code><br/>
</div><div class="textblock"><div class="dynheader">
Include dependency graph for thr_pool.h:</div>
<div class="dyncontent">
<div class="center"><img src="thr__pool_8h__incl.png" border="0" usemap="#thr__pool_8h" alt=""/></div>
<map name="thr__pool_8h" id="thr__pool_8h">
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="thr__pool_8h__dep__incl.png" border="0" usemap="#thr__pool_8hdep" alt=""/></div>
<map name="thr__pool_8hdep" id="thr__pool_8hdep">
<area shape="rect" id="node3" href="thr__pool_8c.html" title="The NPS Pthread Pool implementation." alt="" coords="5,86,91,117"/></map>
</div>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thr__pool_8h.html#a037eba1d6d4092263f5b912451617f5d">THR_POOL_MAX_NUM</a>&#160;&#160;&#160;(1024)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thr__pool_8h.html#a147cb72c116278b6416db5c5d4a6ec7f">THR_POOL_MAX_POOLS</a>&#160;&#160;&#160;32767</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">max number of pools (= 2^15 - 1)  <a href="#a147cb72c116278b6416db5c5d4a6ec7f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thr__pool_8h.html#a27f765f0b658d3b023e77eb914da90c2">THR_POOL_MAX_THREADS</a>&#160;&#160;&#160;(THR_POOL_MAX_NUM - 2)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">max number of threads that can be in any pool.  <a href="#a27f765f0b658d3b023e77eb914da90c2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thr__pool_8h.html#af69820be2163418820bd339a5777a09f">THR_POOL_BASE</a>&#160;&#160;&#160;(-100)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">All return codes are in the interval [THR_POOL_BASE, THR_POOL_LAST].  <a href="#af69820be2163418820bd339a5777a09f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thr__pool_8h.html#a4cc3a195373127c97d087519991b1bd2">THR_POOL_SUCCESS</a>&#160;&#160;&#160;(THR_POOL_BASE)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return code: operation successful.  <a href="#a4cc3a195373127c97d087519991b1bd2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thr__pool_8h.html#aa097319bff4d425c4942d49d9bf53c4e">THR_POOL_ERROR</a>&#160;&#160;&#160;(THR_POOL_BASE - 1)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return code: a soft error ocurred; the pool might still be usable.  <a href="#aa097319bff4d425c4942d49d9bf53c4e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thr__pool_8h.html#a8e39dbea80934a09b4554a88ee9e9266">THR_POOL_UNRECOV_ERROR</a>&#160;&#160;&#160;(THR_POOL_BASE - 2)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return code: a hard error ocurred; the pool may not be usable further.  <a href="#a8e39dbea80934a09b4554a88ee9e9266"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thr__pool_8h.html#a5bdb644f7b60a8a71d34bdf933ee82a6">THR_POOL_NOT_INITIALIZED</a>&#160;&#160;&#160;(THR_POOL_BASE - 3)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return code: operation failed because the pool was not initialized.  <a href="#a5bdb644f7b60a8a71d34bdf933ee82a6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thr__pool_8h.html#a2c5ac44794dce69816588e720dc6969e">THR_POOL_BAD_INPUT</a>&#160;&#160;&#160;(THR_POOL_BASE - 4)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return code: operation failed because the input was bad.  <a href="#a2c5ac44794dce69816588e720dc6969e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thr__pool_8h.html#a34257b2aa8da379aa64f3aeec91d895f">THR_POOL_INVALID_HANDLE</a>&#160;&#160;&#160;(THR_POOL_BASE - 5)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return code: operation failed because the input pool handle was invalid.  <a href="#a34257b2aa8da379aa64f3aeec91d895f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thr__pool_8h.html#a3c4673463d43c7ca9e3e7a2f338f7ed0">THR_POOL_RESOURCE_ERROR</a>&#160;&#160;&#160;(THR_POOL_BASE - 6)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return code: a memory- or resource-related error ocurred.  <a href="#a3c4673463d43c7ca9e3e7a2f338f7ed0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thr__pool_8h.html#aac79d38e0cb7247f4bf20dc49b25178e">THR_POOL_LAST</a>&#160;&#160;&#160;(THR_POOL_BASE - 6)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A constant (ensures external / internal return codes don't overlap).  <a href="#aac79d38e0cb7247f4bf20dc49b25178e"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thr__pool_8h.html#adfc6cb75dd5c6b1b599e3a4ca3c3ad08">thr_pool_handle_t</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The type defining the "handle" to a specific pool.  <a href="#adfc6cb75dd5c6b1b599e3a4ca3c3ad08"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thr__pool_8h.html#aba25165c34c5be8b6e7962bb0720f845">thr_pool_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thr__pool_8h.html#a6de13b9b0e3fe79500e4bb7a396bb68d">thr_pool_create</a> (const unsigned int pool_min, const unsigned int pool_max, const unsigned int timeout, const pthread_attr_t *attr, <a class="el" href="thr__pool_8h.html#adfc6cb75dd5c6b1b599e3a4ca3c3ad08">thr_pool_handle_t</a> *pool_handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thr__pool_8h.html#af806e108e76a58da14e10a4a2da798cf">thr_pool_queue</a> (const <a class="el" href="thr__pool_8h.html#adfc6cb75dd5c6b1b599e3a4ca3c3ad08">thr_pool_handle_t</a> pool_handle, const int mode, const size_t len, void *(*func)(void *), void *arg)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thr__pool_8h.html#ac8fe95259234f860e3e3210d9bba7def">thr_pool_destroy</a> (const <a class="el" href="thr__pool_8h.html#adfc6cb75dd5c6b1b599e3a4ca3c3ad08">thr_pool_handle_t</a> pool_handle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="thr__pool_8h.html#a45f782dc8e24ea32d736fc01270f50db">thr_pool_free</a> (void)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>The NPS Pthread Pool module interface. </p>
<p>Inferface for a module to maniulate a simple POSIX thread pool. Each pool is manger-less, and supports a min- and max- thread population.</p>
<ul>
<li>To create a new pool, see <a class="el" href="thr__pool_8h.html#a6de13b9b0e3fe79500e4bb7a396bb68d">thr_pool_create()</a>. The module can manage multiple pools; the caller is given a handle to identify the pool, upon pool creation.</li>
<li>To enqueue a job in a pool, see <a class="el" href="thr__pool_8h.html#af806e108e76a58da14e10a4a2da798cf">thr_pool_queue()</a>.</li>
<li>To destroy a pool, see <a class="el" href="thr__pool_8h.html#ac8fe95259234f860e3e3210d9bba7def">thr_pool_destroy()</a>.</li>
</ul>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Initialize the module via <a class="el" href="thr__pool_8h.html#aba25165c34c5be8b6e7962bb0720f845">thr_pool_init()</a>. </dd></dl>
<dl class="post"><dt><b>Postcondition:</b></dt><dd>Free the module via <a class="el" href="thr__pool_8h.html#a45f782dc8e24ea32d736fc01270f50db">thr_pool_free()</a>. </dd></dl>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a2c5ac44794dce69816588e720dc6969e"></a><!-- doxytag: member="thr_pool.h::THR_POOL_BAD_INPUT" ref="a2c5ac44794dce69816588e720dc6969e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define THR_POOL_BAD_INPUT&#160;&#160;&#160;(THR_POOL_BASE - 4)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return code: operation failed because the input was bad. </p>

</div>
</div>
<a class="anchor" id="af69820be2163418820bd339a5777a09f"></a><!-- doxytag: member="thr_pool.h::THR_POOL_BASE" ref="af69820be2163418820bd339a5777a09f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define THR_POOL_BASE&#160;&#160;&#160;(-100)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>All return codes are in the interval [THR_POOL_BASE, THR_POOL_LAST]. </p>

</div>
</div>
<a class="anchor" id="aa097319bff4d425c4942d49d9bf53c4e"></a><!-- doxytag: member="thr_pool.h::THR_POOL_ERROR" ref="aa097319bff4d425c4942d49d9bf53c4e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define THR_POOL_ERROR&#160;&#160;&#160;(THR_POOL_BASE - 1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return code: a soft error ocurred; the pool might still be usable. </p>

</div>
</div>
<a class="anchor" id="a34257b2aa8da379aa64f3aeec91d895f"></a><!-- doxytag: member="thr_pool.h::THR_POOL_INVALID_HANDLE" ref="a34257b2aa8da379aa64f3aeec91d895f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define THR_POOL_INVALID_HANDLE&#160;&#160;&#160;(THR_POOL_BASE - 5)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return code: operation failed because the input pool handle was invalid. </p>

</div>
</div>
<a class="anchor" id="aac79d38e0cb7247f4bf20dc49b25178e"></a><!-- doxytag: member="thr_pool.h::THR_POOL_LAST" ref="aac79d38e0cb7247f4bf20dc49b25178e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define THR_POOL_LAST&#160;&#160;&#160;(THR_POOL_BASE - 6)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A constant (ensures external / internal return codes don't overlap). </p>

</div>
</div>
<a class="anchor" id="a037eba1d6d4092263f5b912451617f5d"></a><!-- doxytag: member="thr_pool.h::THR_POOL_MAX_NUM" ref="a037eba1d6d4092263f5b912451617f5d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define THR_POOL_MAX_NUM&#160;&#160;&#160;(1024)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a147cb72c116278b6416db5c5d4a6ec7f"></a><!-- doxytag: member="thr_pool.h::THR_POOL_MAX_POOLS" ref="a147cb72c116278b6416db5c5d4a6ec7f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define THR_POOL_MAX_POOLS&#160;&#160;&#160;32767</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>max number of pools (= 2^15 - 1) </p>

</div>
</div>
<a class="anchor" id="a27f765f0b658d3b023e77eb914da90c2"></a><!-- doxytag: member="thr_pool.h::THR_POOL_MAX_THREADS" ref="a27f765f0b658d3b023e77eb914da90c2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define THR_POOL_MAX_THREADS&#160;&#160;&#160;(THR_POOL_MAX_NUM - 2)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>max number of threads that can be in any pool. </p>
<p>We use 2 less than THR_POOL_MAX_NUM since</p>
<ul>
<li>LinuxThreads has a manager thread</li>
<li>the caller uses one thread </li>
</ul>

</div>
</div>
<a class="anchor" id="a5bdb644f7b60a8a71d34bdf933ee82a6"></a><!-- doxytag: member="thr_pool.h::THR_POOL_NOT_INITIALIZED" ref="a5bdb644f7b60a8a71d34bdf933ee82a6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define THR_POOL_NOT_INITIALIZED&#160;&#160;&#160;(THR_POOL_BASE - 3)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return code: operation failed because the pool was not initialized. </p>

</div>
</div>
<a class="anchor" id="a3c4673463d43c7ca9e3e7a2f338f7ed0"></a><!-- doxytag: member="thr_pool.h::THR_POOL_RESOURCE_ERROR" ref="a3c4673463d43c7ca9e3e7a2f338f7ed0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define THR_POOL_RESOURCE_ERROR&#160;&#160;&#160;(THR_POOL_BASE - 6)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return code: a memory- or resource-related error ocurred. </p>

</div>
</div>
<a class="anchor" id="a4cc3a195373127c97d087519991b1bd2"></a><!-- doxytag: member="thr_pool.h::THR_POOL_SUCCESS" ref="a4cc3a195373127c97d087519991b1bd2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define THR_POOL_SUCCESS&#160;&#160;&#160;(THR_POOL_BASE)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return code: operation successful. </p>

</div>
</div>
<a class="anchor" id="a8e39dbea80934a09b4554a88ee9e9266"></a><!-- doxytag: member="thr_pool.h::THR_POOL_UNRECOV_ERROR" ref="a8e39dbea80934a09b4554a88ee9e9266" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define THR_POOL_UNRECOV_ERROR&#160;&#160;&#160;(THR_POOL_BASE - 2)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return code: a hard error ocurred; the pool may not be usable further. </p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="adfc6cb75dd5c6b1b599e3a4ca3c3ad08"></a><!-- doxytag: member="thr_pool.h::thr_pool_handle_t" ref="adfc6cb75dd5c6b1b599e3a4ca3c3ad08" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int <a class="el" href="thr__pool_8h.html#adfc6cb75dd5c6b1b599e3a4ca3c3ad08">thr_pool_handle_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The type defining the "handle" to a specific pool. </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a6de13b9b0e3fe79500e4bb7a396bb68d"></a><!-- doxytag: member="thr_pool.h::thr_pool_create" ref="a6de13b9b0e3fe79500e4bb7a396bb68d" args="(const unsigned int pool_min, const unsigned int pool_max, const unsigned int timeout, const pthread_attr_t *attr, thr_pool_handle_t *pool_handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int thr_pool_create </td>
          <td>(</td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>pool_min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>pool_max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pthread_attr_t *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="thr__pool_8h.html#adfc6cb75dd5c6b1b599e3a4ca3c3ad08">thr_pool_handle_t</a> *&#160;</td>
          <td class="paramname"><em>pool_handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create and initialize the thread pool.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pool_min</td><td>The minimum number of threads in the pool. If no jobs are present for the pool, these threads are present, but idle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pool_max</td><td>The maximum number of active threads allowed in the queue; it should be the case that pool_max should be non-zero, no less than pool_min, and no greater than THR_POOL_MAX_THREADS. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>A value, interpreted as seconds, at most THR_POOL_MAX_TIMEOUT; if the number of active threads in the thread pool is in excess of pool_min, any thread that becomes idle will wait for timeout seconds. If no tasks are present in the queue or entered in the queue during this time, the thread will be removed from the pool and the system resources for the thread will be reclaimed; </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attr</td><td>Pointer to the POSIX thread attribute used to specify the attributes of any thread created in the thread pool. If NULL, the default attributes of pthread_create() are used. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pool_handle</td><td>A handle for the thread pool. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>An indicator of whether or not the operation was successful. On success: THR_POOL_SUCCESS is returned. On error: THR_POOL_BAD_INPUT, THR_POOL_RESOURCE_ERROR, THR_POOL_NOT_INITIALIZED, THR_POOL_ERROR, or THR_POOL_UNRECOV_ERROR is returned. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="thr__pool_8h_a6de13b9b0e3fe79500e4bb7a396bb68d_cgraph.png" border="0" usemap="#thr__pool_8h_a6de13b9b0e3fe79500e4bb7a396bb68d_cgraph" alt=""/></div>
<map name="thr__pool_8h_a6de13b9b0e3fe79500e4bb7a396bb68d_cgraph" id="thr__pool_8h_a6de13b9b0e3fe79500e4bb7a396bb68d_cgraph">
<area shape="rect" id="node3" href="thr__pool_8c.html#a5215551bceca46329030b42fb48dc7f0" title="thrint_create_worker" alt="" coords="176,98,331,129"/><area shape="rect" id="node10" href="thr__pool_8c.html#ac9590acea33cb2e638eb1effa855d196" title="thrint_error_check" alt="" coords="868,113,1007,143"/><area shape="rect" id="node5" href="thr__pool_8c.html#af8cf53d10b81253e1747bd0c6345a6dc" title="thrint_worker_function" alt="" coords="380,98,548,129"/><area shape="rect" id="node7" href="thr__pool_8c.html#afaad589dc206e64a2e0adb6bc42ebcc4" title="thrint_worker_cleanup_handler" alt="" coords="597,5,819,35"/><area shape="rect" id="node12" href="thr__pool_8c.html#a4eb4a5269e0dbdea896c91cabdfca458" title="thrint_job_free_handler" alt="" coords="622,111,794,142"/><area shape="rect" id="node14" href="thr__pool_8c.html#a33b61dadac8126ac8160cde0c928b2e3" title="thrint_job_cleanup_handler" alt="" coords="609,166,807,197"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac8fe95259234f860e3e3210d9bba7def"></a><!-- doxytag: member="thr_pool.h::thr_pool_destroy" ref="ac8fe95259234f860e3e3210d9bba7def" args="(const thr_pool_handle_t pool_handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int thr_pool_destroy </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="thr__pool_8h.html#adfc6cb75dd5c6b1b599e3a4ca3c3ad08">thr_pool_handle_t</a>&#160;</td>
          <td class="paramname"><em>pool_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Cancels all queued jobs, kills all active threads, and frees all internal module resources related to the thread.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pool_handle</td><td>The handle for the thread pool. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>An indicator of whether or not the operation was successful On success: THR_POOL_SUCCESS is returned. On error: THR_POOL_INVALID_HANDLE, THR_POOL_NOT_INITIALIZED, THR_POOL_ERROR, or THR_POOL_UNRECOV_ERROR is returned. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="thr__pool_8h_ac8fe95259234f860e3e3210d9bba7def_cgraph.png" border="0" usemap="#thr__pool_8h_ac8fe95259234f860e3e3210d9bba7def_cgraph" alt=""/></div>
<map name="thr__pool_8h_ac8fe95259234f860e3e3210d9bba7def_cgraph" id="thr__pool_8h_ac8fe95259234f860e3e3210d9bba7def_cgraph">
<area shape="rect" id="node3" href="thr__pool_8c.html#ac5054ebef08427ea6be074e1dd43cb12" title="thrint_pool_destroy" alt="" coords="185,5,332,35"/><area shape="rect" id="node7" href="thr__pool_8c.html#ac9590acea33cb2e638eb1effa855d196" title="thrint_error_check" alt="" coords="189,59,328,90"/><area shape="rect" id="node5" href="thr__pool_8c.html#a4eb4a5269e0dbdea896c91cabdfca458" title="thrint_job_free_handler" alt="" coords="382,5,554,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a45f782dc8e24ea32d736fc01270f50db"></a><!-- doxytag: member="thr_pool.h::thr_pool_free" ref="a45f782dc8e24ea32d736fc01270f50db" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int thr_pool_free </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Cancels all queued jobs, kills all active threads, and frees all internal module resources. All thread pools being managed are destroyed.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>An indicator of whether or not the operation was successful On success: THR_POOL_SUCCESS is returned. On error: THR_POOL_NOT_INITIALIZED, or THR_POOL_UNRECOV_ERROR is returned. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="thr__pool_8h_a45f782dc8e24ea32d736fc01270f50db_cgraph.png" border="0" usemap="#thr__pool_8h_a45f782dc8e24ea32d736fc01270f50db_cgraph" alt=""/></div>
<map name="thr__pool_8h_a45f782dc8e24ea32d736fc01270f50db_cgraph" id="thr__pool_8h_a45f782dc8e24ea32d736fc01270f50db_cgraph">
<area shape="rect" id="node3" href="thr__pool_8c.html#ac5054ebef08427ea6be074e1dd43cb12" title="thrint_pool_destroy" alt="" coords="161,5,308,35"/><area shape="rect" id="node5" href="thr__pool_8c.html#a4eb4a5269e0dbdea896c91cabdfca458" title="thrint_job_free_handler" alt="" coords="358,5,530,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aba25165c34c5be8b6e7962bb0720f845"></a><!-- doxytag: member="thr_pool.h::thr_pool_init" ref="aba25165c34c5be8b6e7962bb0720f845" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int thr_pool_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize the thread management module data.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>An indicator of whether or not the operation was successful On success: THR_POOL_SUCCESS is returned. On error: THR_POOL_RESOURCE_ERROR, THR_POOL_ERROR, or THR_POOL_UNRECOV_ERROR is returned. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="thr__pool_8h_aba25165c34c5be8b6e7962bb0720f845_cgraph.png" border="0" usemap="#thr__pool_8h_aba25165c34c5be8b6e7962bb0720f845_cgraph" alt=""/></div>
<map name="thr__pool_8h_aba25165c34c5be8b6e7962bb0720f845_cgraph" id="thr__pool_8h_aba25165c34c5be8b6e7962bb0720f845_cgraph">
<area shape="rect" id="node3" href="thr__pool_8c.html#a97b3d122250b6bf7a63aa968acc4bcbf" title="thrint_lock_all" alt="" coords="193,55,305,86"/><area shape="rect" id="node5" href="thr__pool_8c.html#ae451f9c3f90eee56f8db501dc618c647" title="thrint_unlock_all" alt="" coords="412,5,540,35"/><area shape="rect" id="node7" href="thr__pool_8c.html#ac9590acea33cb2e638eb1effa855d196" title="thrint_error_check" alt="" coords="612,83,751,114"/><area shape="rect" id="node11" href="thr__pool_8c.html#a10ebf3b9eacda8b2ca469bfc1627c7c9" title="thrint_fork_child_handler" alt="" coords="157,162,341,193"/><area shape="rect" id="node13" href="thr__pool_8c.html#a4eb4a5269e0dbdea896c91cabdfca458" title="thrint_job_free_handler" alt="" coords="390,213,562,243"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af806e108e76a58da14e10a4a2da798cf"></a><!-- doxytag: member="thr_pool.h::thr_pool_queue" ref="af806e108e76a58da14e10a4a2da798cf" args="(const thr_pool_handle_t pool_handle, const int mode, const size_t len, void *(*func)(void *), void *arg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int thr_pool_queue </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="thr__pool_8h.html#adfc6cb75dd5c6b1b599e3a4ca3c3ad08">thr_pool_handle_t</a>&#160;</td>
          <td class="paramname"><em>pool_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *(*)(void *)&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If there are idle threads in the pool, awaken one to perform the job. If there are no idle threads but the maximum number of threads in the pool has not been reached, create a new thread to perform the job. If no idle threads exist and the pool already has the maximum number of threads, then add the job to the queue and return success; some existing worker thread will perform the job when it becomes idle. If mode is 1, the len bytes at arg will be copied locally, and the job (when executed) will use the local copy of arg.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pool_handle</td><td>The handle for the thread pool. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>Can take any value. If 1, it indicates arg should be (shallow) copied. This is useful in many scenarios, e.g. when arg is a pointer to something on the caller's stack. If arguments are not copied, the caller must ensure arg persists until a thread is scheduled for the job, and throughout the duration of that job. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>The length of arg. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">func</td><td>A pointer to the job function. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">arg</td><td>A pointer to the arguments for the job function. If argument is copied when enqueued, it cannot be used as an output argument. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>An indicator of whether or not the operation was successful On success: THR_POOL_SUCCESS is returned. On error: THR_POOL_BAD_INPUT, THR_POOL_RESOURCE_ERROR, THR_POOL_INVALID_HANDLE, THR_POOL_NOT_INITIALIZED, THR_POOL_ERROR, or THR_POOL_UNRECOV_ERROR is returned. </dd></dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="thr__pool_8h_af806e108e76a58da14e10a4a2da798cf_cgraph.png" border="0" usemap="#thr__pool_8h_af806e108e76a58da14e10a4a2da798cf_cgraph" alt=""/></div>
<map name="thr__pool_8h_af806e108e76a58da14e10a4a2da798cf_cgraph" id="thr__pool_8h_af806e108e76a58da14e10a4a2da798cf_cgraph">
<area shape="rect" id="node3" href="thr__pool_8c.html#a5215551bceca46329030b42fb48dc7f0" title="thrint_create_worker" alt="" coords="176,98,331,129"/><area shape="rect" id="node10" href="thr__pool_8c.html#ac9590acea33cb2e638eb1effa855d196" title="thrint_error_check" alt="" coords="868,113,1007,143"/><area shape="rect" id="node5" href="thr__pool_8c.html#af8cf53d10b81253e1747bd0c6345a6dc" title="thrint_worker_function" alt="" coords="380,98,548,129"/><area shape="rect" id="node7" href="thr__pool_8c.html#afaad589dc206e64a2e0adb6bc42ebcc4" title="thrint_worker_cleanup_handler" alt="" coords="597,5,819,35"/><area shape="rect" id="node12" href="thr__pool_8c.html#a4eb4a5269e0dbdea896c91cabdfca458" title="thrint_job_free_handler" alt="" coords="622,111,794,142"/><area shape="rect" id="node14" href="thr__pool_8c.html#a33b61dadac8126ac8160cde0c928b2e3" title="thrint_job_cleanup_handler" alt="" coords="609,166,807,197"/></map>
</div>
</p>

</div>
</div>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated for NPS Pthread Pool by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a></small></address>
</body>
</html>
